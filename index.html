<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Megaherz Campus</title>
<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Comic Neue', sans-serif; margin:0; padding:0; text-align:center; background:url('images/background.jpg') center/cover no-repeat fixed; color:#333; transition: background 0.5s; }
h1 { margin-top:20px; font-size:2em; color:#ff6f61; text-shadow:2px 2px #fff; }
button { background:#ffcb05; border:none; border-radius:15px; padding:12px 25px; margin:10px; font-size:1.3em; cursor:pointer; transition: transform 0.2s, background 0.2s; }
button:hover { transform: scale(1.1); background:#ffd633; }

/* Scoreboard */
#scoreboard { margin: 10px auto; display:flex; justify-content:center; gap:20px; font-size:1.2em; font-weight:bold; color:#0066cc; }
#scoreboard span { background:#fff3e0; border:2px solid #ffcb05; padding:5px 10px; border-radius:10px; }

/* PDF Documents */
#pdfContainer { display: flex; flex-wrap: wrap; justify-content: center; margin: 15px 0; }
.pdfCard { background: #fff3e0; border: 2px solid #ffcb05; border-radius: 15px; width: 120px; height: 150px; margin: 10px; display:flex; flex-direction: column; align-items: center; justify-content: center; cursor:pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: transform 0.2s, box-shadow 0.2s; }
.pdfCard:hover { transform: scale(1.1); box-shadow:0 6px 15px rgba(0,0,0,0.3); }
.pdfIcon { font-size: 40px; margin-bottom: 10px; }
.pdfTitle { font-weight:bold; font-size:1em; text-align:center; color:#333; }

/* Game screens */
#mapGame,#mathGame { display:none; }

/* Map Game */
#mapContainer { position:relative; background:url('images/map-bg.png') center/contain no-repeat; width:100%; max-width:600px; height:400px; margin:20px auto; border-radius:20px; overflow:hidden; box-shadow:0 0 20px rgba(0,0,0,0.3); }
.checkpoint { position:absolute; width:40px; height:40px; background:#aaa; border-radius:50%; color:white; font-weight:bold; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:2; transition: background 0.3s; box-shadow:0 0 8px rgba(0,0,0,0.4); }
#character { position:absolute; width:40px; height:40px; background:url('images/character.png') center/contain no-repeat; z-index:3; transition: all 0.7s ease; }
#questionText { font-size:1.2em; font-weight:bold; margin:10px 0; color:#0066cc; }
#mapOptions input { padding:8px; font-size:1.1em; width:100px; margin-right:5px; border-radius:8px; border:1px solid #ccc; }
#mapOptions button { padding:8px 12px; font-size:1em; }

/* Math Quest Game */
#mathGame { background:url('images/background.jpg') center/cover no-repeat; padding-bottom:20px; }
#mathContainer { margin-top:30px; }
#mathQuestion { font-size:1.5em; margin-bottom:15px; color:#ff6f61; }
#mathOptions .option { width:220px; background:#ddd; color:#333; margin:8px auto; border-radius:12px; padding:12px; cursor:pointer; box-shadow:0 0 6px rgba(0,0,0,0.3); font-size:1.2em; transition:0.2s; }
#mathOptions .option:hover { opacity:0.8; }
#mathScore { font-size:1.3em; color:#ffcb05; margin-top:15px; }
</style>
</head>
<body>
<h1>Willkommen im Megaherz Campus!</h1>

<div id="scoreboard">
  <span id="goldCount">Gold: 0</span>
  <span id="starCount">Sterne: 0</span>
</div>

<div id="pdfContainer">
  <div class="pdfCard" onclick="window.open('docs/doc1.pdf')"><div class="pdfIcon">ðŸ“„</div><span class="pdfTitle">Dokument 1</span></div>
  <div class="pdfCard" onclick="window.open('docs/doc2.pdf')"><div class="pdfIcon">ðŸ“„</div><span class="pdfTitle">Dokument 2</span></div>
  <div class="pdfCard" onclick="window.open('docs/doc3.pdf')"><div class="pdfIcon">ðŸ“„</div><span class="pdfTitle">Dokument 3</span></div>
</div>

<button id="startMap">Karten-Abenteuer starten</button>
<button id="startMath">Mathe-Quest starten</button>

<!-- Map Game -->
<div id="mapGame">
  <div id="mapContainer">
    <div id="character"></div>
    <div class="checkpoint" id="A" style="top:15%; left:10%;">A</div>
    <div class="checkpoint" id="B" style="top:25%; left:40%;">B</div>
    <div class="checkpoint" id="C" style="top:40%; left:65%;">C</div>
    <div class="checkpoint" id="D" style="top:55%; left:55%;">D</div>
    <div class="checkpoint" id="E" style="top:70%; left:30%;">E</div>
    <div class="checkpoint" id="F" style="top:80%; left:60%;">F</div>
  </div>
  <p id="questionText"></p>
  <div id="mapOptions"></div>
  <button id="backHome1">ZurÃ¼ck</button>
</div>

<!-- Math Quest Game -->
<div id="mathGame">
  <div id="mathContainer">
    <h2 id="mathQuestion">Frage</h2>
    <div id="mathOptions"></div>
    <p id="mathScore">Punkte: 0</p>
    <button id="backHome2">ZurÃ¼ck</button>
  </div>
</div>

<script>
if('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js');

let totalGold=0, totalStars=0;

const homeBtns={startMap:document.getElementById('startMap'), startMath:document.getElementById('startMath'),
mapGame:document.getElementById('mapGame'), mathGame:document.getElementById('mathGame'),
backHome1:document.getElementById('backHome1'), backHome2:document.getElementById('backHome2')};

const pdfContainer=document.getElementById('pdfContainer');
const goldCount=document.getElementById('goldCount');
const starCount=document.getElementById('starCount');

homeBtns.startMap.onclick=()=>showGame('map');
homeBtns.startMath.onclick=()=>showGame('math');
homeBtns.backHome1.onclick=homeBtns.backHome2.onclick=()=>showGame('home');

function showGame(mode){
  document.body.style.backgroundImage=mode==='home'?"url('images/background.jpg')":'none';
  homeBtns.mapGame.style.display=mode==='map'?'block':'none';
  homeBtns.mathGame.style.display=mode==='math'?'block':'none';
  homeBtns.startMap.style.display=homeBtns.startMath.style.display=mode==='home'?'inline-block':'none';
  pdfContainer.style.display=mode==='home'?'flex':'none';
  if(mode==='home'){
    currentCheckpoint=0; character.style.left='0px'; character.style.top='0px';
    questionText.textContent=''; mapOptions.innerHTML='';
    document.querySelectorAll('.checkpoint').forEach(cp=>{cp.style.background='#aaa'; cp.dataset.answered='';});
    score=0; questionCount=0; scoreEl.textContent='Punkte: 0'; questionEl.textContent='Frage'; optionsEl.innerHTML='';
  }
  if(mode==='math') startMathGame();
}

// MAP GAME
const checkpoints=['A','B','C','D','E','F'];
let currentCheckpoint=0;
const character=document.getElementById('character');
const questionText=document.getElementById('questionText');
const mapOptions=document.getElementById('mapOptions');
const mapQuestions={};
checkpoints.forEach(cp=>{
  const a=Math.floor(Math.random()*10)+1;
  const b=Math.floor(Math.random()*10)+1;
  mapQuestions[cp]={a,b,answer:a+b};
});
document.querySelectorAll('.checkpoint').forEach(cp=>{
  cp.addEventListener('click',()=>{
    if(cp.dataset.answered==='true') return;
    if(checkpoints.indexOf(cp.id)===currentCheckpoint) showMapQuestion(cp);
  });
});
function showMapQuestion(cp){
  const q=mapQuestions[cp.id];
  questionText.textContent=`Was ist ${q.a} + ${q.b}?`;
  mapOptions.innerHTML='';
  const input=document.createElement('input'); input.type='number';
  const btn=document.createElement('button'); btn.textContent='Antworten';
  btn.onclick=()=>{
    if(Number(input.value)===q.answer){ cp.style.background='green'; cp.dataset.answered='true'; totalGold++; goldCount.textContent=`Gold: ${totalGold}`; }
    else{ cp.style.background='red'; }
    moveCharacter(cp); currentCheckpoint++; questionText.textContent=''; mapOptions.innerHTML='';
  };
  mapOptions.appendChild(input); mapOptions.appendChild(btn);
}
function moveCharacter(cp){
  const rect=cp.getBoundingClientRect(), parentRect=cp.parentElement.getBoundingClientRect();
  character.style.left=(rect.left-parentRect.left)+'px';
  character.style.top=(rect.top-parentRect.top-character.offsetHeight)+'px';
}

// MATH QUEST
let score=0, questionCount=0;
const questionEl=document.getElementById('mathQuestion');
const optionsEl=document.getElementById('mathOptions');
const scoreEl=document.getElementById('mathScore');

function startMathGame(){ score=0; questionCount=0; nextMathQuestion(); }

function nextMathQuestion(){
  if(questionCount>=10){ questionEl.textContent=`ðŸŽ‰ Spiel vorbei! Punkte: ${score}/10`; optionsEl.innerHTML=''; return; }
  const a=Math.floor(Math.random()*10)+1, b=Math.floor(Math.random()*10)+1, correct=a+b;
  const wrong1=correct+(Math.random()<0.5?1:-1), wrong2=correct+(Math.random()<0.5?2:-2);
  const answers=[correct,wrong1,wrong2].sort(()=>Math.random()-0.5);
  questionEl.textContent=`Was ist ${a} + ${b}?`; optionsEl.innerHTML='';
  answers.forEach(ans=>{
    const div=document.createElement('div'); div.className='option'; div.textContent=ans;
    div.onclick=()=>{ if(ans===correct){ div.style.background='green'; score++; totalStars++; starCount.textContent=`Sterne: ${totalStars}`; } else{ div.style.background='red'; } scoreEl.textContent=`Punkte: ${score}`; questionCount++; setTimeout(nextMathQuestion,500);}
    optionsEl.appendChild(div);
  });
}
</script>
</body>
</html>
